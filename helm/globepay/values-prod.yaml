# Default values for globepay.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global:
  namespace: globepay-prod
  environment: production

replicaCount: 3

image:
  repository: 907849381252.dkr.ecr.us-east-1.amazonaws.com/globepay-backend
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Backend service configuration
backend:
  replicaCount: 3
  image:
    repository: 907849381252.dkr.ecr.us-east-1.amazonaws.com/globepay-backend
    pullPolicy: IfNotPresent
    tag: "latest"
  service:
    type: ClusterIP
    port: 8080
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  livenessProbe:
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3

# Frontend service configuration
frontend:
  replicaCount: 3
  image:
    repository: 907849381252.dkr.ecr.us-east-1.amazonaws.com/globepay-frontend
    pullPolicy: IfNotPresent
    tag: "latest"
  service:
    type: ClusterIP
    port: 80
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  livenessProbe:
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3

# Database configuration
database:
  name: globepay
  service:
    port: 5432

# Redis configuration
redis:
  name: redis
  service:
    port: 6379

# Secrets configuration
secrets:
  enabled: true
  name: backend-secrets
  dbPassword: ""
  jwtSecret: ""

# ConfigMap configuration
configmap:
  enabled: true
  name: backend-config

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:907849381252:certificate/ebe427bd-7106-43b3-9a82-9d46d84f83bf
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/healthcheck-path: /health
    alb.ingress.kubernetes.io/healthcheck-interval-seconds: "15"
    alb.ingress.kubernetes.io/healthcheck-timeout-seconds: "5"
    alb.ingress.kubernetes.io/success-codes: "200"
    alb.ingress.kubernetes.io/load-balancer-attributes: idle_timeout.timeout_seconds=120
    alb.ingress.kubernetes.io/ssl-policy: ELBSecurityPolicy-TLS-1-2-2017-01
    alb.ingress.kubernetes.io/group.name: globepay-ingress-group
    alb.ingress.kubernetes.io/target-group-attributes: stickiness.enabled=true,stickiness.lb_cookie.duration_seconds=3600
  hosts:
    - host: globepay.space
      paths:
        - path: /
          pathType: Prefix
    - host: www.globepay.space
      paths:
        - path: /
          pathType: Prefix
    - host: api.globepay.space
      paths:
        - path: /
          pathType: Prefix
  tls: []